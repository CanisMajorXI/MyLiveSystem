<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Site made with Mobirise Website Builder v4.10.0, https://mobirise.com -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="Mobirise v4.10.0, mobirise.com">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <link rel="shortcut icon" href="/assets/images/winnie3-204x164.png" type="image/x-icon">
    <meta name="description" content="Website Maker Description">

    <title th:text="${room_name}"></title>
    <link rel="stylesheet" href="/assets/web/assets/mobirise-icons-bold/mobirise-icons-bold.css">
    <link rel="stylesheet" href="/assets/web/assets/mobirise-icons2/mobirise2.css">
    <link rel="stylesheet" href="/assets/tether/tether.min.css">
    <link rel="stylesheet" href="/assets/soundcloud-plugin/style.css">
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="/assets/socicon/css/styles.css">
    <link rel="stylesheet" href="/assets/animatecss/animate.min.css">
    <link rel="stylesheet" href="/assets/dropdown/css/style.css">
    <link rel="stylesheet" href="/assets/theme/css/style.css">
    <link rel="stylesheet" href="/assets/mobirise/css/mbr-additional.css" type="text/css">


</head>
<body>
<div th:replace="th-common::header"></div>

<section class="header1 cid-rqavPzHP5T" id="header16-1t">


    <div class="container">
        <div class="row justify-content-md-center">
            <div class="col-md-10 align-center">
                <h1 class="mbr-section-title mbr-bold pb-3 mbr-fonts-style display-2" th:text="${room_name}">
                    独人13的直播间</h1>

                <p class="mbr-text pb-3 mbr-fonts-style display-5" th:text="${room_intro}">
                    最后警告，谢绝暴骂血黄水，，，</p>

            </div>
        </div>
    </div>

</section>

<section class="cid-rqaso3Z51t" id="image4-1r">
    <!-- Block parameters controls (Blue "Gear" panel) -->

    <!-- End block parameters -->
    <div class="container images-container container-fluid">
        <div class="media-container-row" style="width: 100%;">
            <div class="img-item item1" style="width: 177%;">
                <video id="videoElement" controls autoplay width="100%" height="100%">Your browser is too old
                    which doesn't support HTML5 video.
                </video>
                <div class="img-caption">
                    <p class="mbr-fonts-style align-center mbr-black display-7">
                        直播视频，如没有画面请刷新
                    </p>
                </div>
            </div>
            <script src="https://cdn.bootcss.com/flv.js/1.5.0/flv.js"></script>
            <script th:inline="javascript">
                var player = document.getElementById('videoElement');
                if (flvjs.isSupported()) {
                    var flvPlayer = flvjs.createPlayer({
                        type: 'flv',
                        "isLive": true,//<====加个这个
                        //52.184.100.96
                        // url: 'http://40.115.165.184:80/live/mylive.flv',//<==自行修改
                //        url: 'http://winnie.live/room/[[${room_id}]].flv',//<==自行修改
                        url: 'http://192.168.214.131/[[${room_id}]].flv',//<==自行修改

                    });
                    flvPlayer.attachMediaElement(videoElement);
                    flvPlayer.load(); //加载52.184.100.96
                    flv_start();
                }

                function flv_start() {
                    player.play();
                }

                function flv_pause() {
                    player.pause();
                }

                function flv_destroy() {
                    player.pause();
                    player.unload();
                    player.detachMediaElement();
                    player.destroy();
                    player = null;
                }

                function flv_seekto() {
                    player.currentTime = parseFloat(document.getElementsByName('seekpoint')[0].value);
                }
            </script>
            <div class="img-item">
                <!--                    <img src="/assets/images/background9.jpg">-->
                <div class="img-caption">
                    <p class="mbr-fonts-style align-center mbr-black display-7">
                    <div id="live-context" style="min-height: 470px;"></div>
                    <input id="live-message" type="text"/>
                    <button onclick="sendMessage()">发送消息</button>
                        聊天互动
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="services3 cid-rqawoYhWd4" id="services3-1u">
    <!---->

    <!---->
    <!--Overlay-->

    <!--Container-->
    <div class="container">
        <div class="row">
            <!--Titles-->
            <div class="title pb-5 col-12">

                <h3 class="mbr-section-subtitle mbr-light mbr-fonts-style pt-3 m-0 display-2">
                    评论</h3>
            </div>
            <!--Card-1-->
            <div class="card px-3 col-12 col-md-6">
                <div class="card-wrapper media-container-row media-container-row">
                    <div class="card-box">
                        <div class="top-line pb-1">
                            <h4 class="card-title mbr-fonts-style display-5">
                                Watch 1
                            </h4>
                            <p class="mbr-text card-title cost mbr-fonts-style m-0 display-5">
                                $400
                            </p>
                        </div>
                        <div class="bottom-line">
                            <p class="mbr-text mbr-fonts-style display-7">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloribus, odit?
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!--Card-2-->
            <div class="card px-3 col-12 col-md-6">
                <div class="card-wrapper media-container-row media-container-row">
                    <div class="card-box">
                        <div class="top-line pb-3">
                            <h4 class="card-title mbr-fonts-style display-5">
                                Watch 2
                            </h4>
                            <p class="mbr-text card-title cost mbr-fonts-style m-0 display-5">
                                $500
                            </p>
                        </div>
                        <div class="bottom-line">
                            <p class="mbr-text mbr-fonts-style display-7">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloribus, odit?
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!--Card-3-->
            <div class="card px-3 col-12 col-md-6">
                <div class="card-wrapper media-container-row media-container-row">
                    <div class="card-box">
                        <div class="top-line pb-3">
                            <h4 class="card-title mbr-fonts-style display-5">
                                Watch 3
                            </h4>
                            <p class="mbr-text card-title cost mbr-fonts-style m-0 display-5">
                                $600
                            </p>
                        </div>
                        <div class="bottom-line">
                            <p class="mbr-text mbr-fonts-style display-7">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloribus, odit?
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!--Card-4-->
            <div class="card px-3 col-12 col-md-6">
                <div class="card-wrapper media-container-row media-container-row">
                    <div class="card-box">
                        <div class="top-line pb-3">
                            <h4 class="card-title mbr-fonts-style display-5">
                                Watch 4
                            </h4>
                            <p class="mbr-text card-title cost mbr-fonts-style m-0 display-5">
                                $700
                            </p>
                        </div>
                        <div class="bottom-line">
                            <p class="mbr-text mbr-fonts-style display-7">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloribus, odit?
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!--Card-5-->
            <div class="card px-3 col-12 col-md-6">
                <div class="card-wrapper media-container-row media-container-row">
                    <div class="card-box">
                        <div class="top-line pb-3">
                            <h4 class="card-title mbr-fonts-style display-5">
                                Watch 5
                            </h4>
                            <p class="mbr-text card-title cost mbr-fonts-style m-0 display-5">
                                $800
                            </p>
                        </div>
                        <div class="bottom-line">
                            <p class="mbr-text mbr-fonts-style display-7">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloribus, odit?
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!--Card-6-->
            <div class="card px-3 col-12 col-md-6">
                <div class="card-wrapper media-container-row media-container-row">
                    <div class="card-box">
                        <div class="top-line pb-3">
                            <h4 class="card-title mbr-fonts-style display-5">
                                Watch 6
                            </h4>
                            <p class="mbr-text card-title cost mbr-fonts-style m-0 display-5">
                                $900
                            </p>
                        </div>
                        <div class="bottom-line">
                            <p class="mbr-text mbr-fonts-style display-7">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloribus, odit?
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!--Card-7-->

            <!--Card-8-->

            <!--Card-9-->

            <!--Card-10-->

            <!--Card-11-->

            <!--Card-12-->

        </div>
    </div>
</section>

<section class="mbr-section form3 cid-rqaxnQBZML" id="form3-1v">


    <div class="container">
        <div class="row justify-content-center">
            <div class="title col-12 col-lg-8">

                <h3 class="mbr-section-subtitle align-center pb-5 mbr-light mbr-fonts-style display-5">
                    发表你的评论</h3>
            </div>
        </div>

        <div class="row py-2 justify-content-center">
            <div class="col-12 col-lg-6  col-md-8 " data-form-type="formoid">
                <!---Formbuilder Form--->
                <form action="https://mobirise.com/" method="POST" class="mbr-form form-with-styler"
                      data-form-title="Mobirise Form"><input type="hidden" name="email" data-form-email="true"
                                                             value="kHm3URm96VR8NvgHcYVtaBOMz8domuJn41fRpG5arZ64g2GvDl5SWeyejVDUViSAMmbpvnXi3N7tn9h8sXUpJBXYnDiP3g0xVQx3Dt3pT4lfkuLBI4cJjlLUpCr9xig9">
                    <div class="row">
                        <div hidden="hidden" data-form-alert="" class="alert alert-success col-12">评论成功</div>
                        <div hidden="hidden" data-form-alert-danger="" class="alert alert-danger col-12">
                        </div>
                    </div>
                    <div class="dragArea row">
                        <div class="form-group col" data-for="email">
                            <input type="email" name="email" placeholder="输入你的评论..." data-form-field="Email"
                                   required="required" class="form-control display-7" id="email-form3-1v">
                        </div>
                        <div class="col-auto input-group-btn">
                            <button type="submit" class="btn btn-primary display-4">发表</button>
                        </div>
                    </div>
                </form><!---Formbuilder Form--->
            </div>
        </div>
    </div>
</section>

<section th:replace="th-common::footer"></section>


<script src="/assets/web/assets/jquery/jquery.min.js"></script>
<script src="/assets/popper/popper.min.js"></script>
<script src="/assets/tether/tether.min.js"></script>
<script src="/assets/bootstrap/js/bootstrap.min.js"></script>
<script src="/assets/touchswipe/jquery.touch-swipe.min.js"></script>
<script src="/assets/viewportchecker/jquery.viewportchecker.js"></script>
<script src="/assets/smoothscroll/smooth-scroll.js"></script>
<script src="/assets/dropdown/js/script.min.js"></script>
<script src="/assets/theme/js/script.js"></script>
<script src="/assets/formoid/formoid.min.js"></script>


<input name="animation" type="hidden">

<script>
    let websocket = new WebSocket("ws://localhost:8080/room/10000001");
    websocket.onerror = function () {
        appendMessage("error!");
    };
    websocket.onopen = function (event) {
        appendMessage("聊天打开！!");
    };
    websocket.onmessage = function (ev) {
        appendMessage(ev.data);
    };
    websocket.onclose = function () {
        appendMessage("聊天关闭!");
    };
    window.onbeforeunload = function () {
        websocket.close();
    }

    function appendMessage(message) {
        let context = $("#live-context").html() + "<br/>" + message;
        $("#live-context").html(context);
    }

    function closeWebSocket() {
        websocket.close();
    }

    function sendMessage() {
        let message = $("#live-message").val();
        websocket.send(message);
    }
</script>
</body>
</html>